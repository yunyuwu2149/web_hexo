{"title":"免费申请泛域名SSL证书","uid":"f9e71af5c85baf2849100d40efa0ddfa","slug":"免费申请泛域名SSL证书","date":"2023-04-27T01:48:57.000Z","updated":"2023-04-27T01:50:29.697Z","comments":true,"path":"api/articles/免费申请泛域名SSL证书.json","keywords":null,"cover":"https://image.yunyuwu.cn/typecho/uploads/2022/09/57147076.png","content":"<h2 id=\"SSL证书是什么？\"><a href=\"#SSL证书是什么？\" class=\"headerlink\" title=\"SSL证书是什么？\"></a>SSL证书是什么？</h2><p>SSL证书是数字证书的一种，类似于驾驶证、护照和营业执照的电子副本。 因为配置在服务器上，也称为SSL服务器证书。 SSL 证书就是遵守 SSL协议 ，由受信任的数字证书颁发机构CA，在验证服务器身份后颁发，具有服务器身份验证和数据传输加密功能。 SSL证书通过在客户端浏览器和 Web服务器 之间建立一条SSL安全通道（Secure socket layer (SSL)安全协议是由Netscape Communication公司设计开发。 该安全协议主要用来提供对用户和服务器的认证；对传送的数据进行加密和隐藏；确保数据在传送中不被改变，即数据的完整性，现已成为该领域中全球化的标准。</p>\n<h2 id=\"SSL证书分类\"><a href=\"#SSL证书分类\" class=\"headerlink\" title=\"SSL证书分类\"></a>SSL证书分类</h2><p>现在SSL证书已经成为建站必不可少的一部分，基本上所有的站点都使用了https协议。在申请SSL证书的时候，我们了解到，证书有：单域名SSL证书、通配符SSL证书、多域SSL证书、多域通配符SSL证书。</p>\n<p>单域名SSL证书最实惠，但缺点是他并不包含任何子域名。而通配符SSL证书则包含了单个域、其所有相关页面以及无限数量的第一级子域，但是他不包含二级子域名。但这也对个人站点够用了，很少会有个人站点同时用到多个二级子域名。</p>\n<h2 id=\"如何申请通配符SSL证书\"><a href=\"#如何申请通配符SSL证书\" class=\"headerlink\" title=\"如何申请通配符SSL证书\"></a>如何申请通配符SSL证书</h2><p>本文使用<code>acme.sh</code>申请和安装泛域名SSL证书。</p>\n<h3 id=\"一、环境配置：\"><a href=\"#一、环境配置：\" class=\"headerlink\" title=\"一、环境配置：\"></a>一、环境配置：</h3><ul>\n<li>centos7.6</li>\n<li>nginx1.21</li>\n<li>阿里云域名服务商</li>\n</ul>\n<h3 id=\"二、安装acme-sh\"><a href=\"#二、安装acme-sh\" class=\"headerlink\" title=\"二、安装acme.sh\"></a>二、安装<code>acme.sh</code></h3><h4 id=\"1-安装socat模块。\"><a href=\"#1-安装socat模块。\" class=\"headerlink\" title=\"1.安装socat模块。\"></a>1.安装<code>socat</code>模块。</h4><p>安装过程需要服务器已安装<code>socat</code>模块，没有安装的执行以下命令进行安装。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">yum install socat</code></pre>\n\n<h4 id=\"2-安装amce-sh\"><a href=\"#2-安装amce-sh\" class=\"headerlink\" title=\"2.安装amce.sh\"></a>2.安装<code>amce.sh</code></h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">curl https:&#x2F;&#x2F;get.acme.sh | sh \n# 或者：\nwget -O -  https:&#x2F;&#x2F;get.acme.sh | sh</code></pre>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1.如果在执行后长时间没有反应，请<code>ctrl+c</code>后重新执行命令。acme.sh 安装在 ~&#x2F;.acme.sh 目录下。<br>2.如果在安装后提示<code>command not found</code>则需要重新加载环境变量 <code>source ~/.bashrc</code> 或 <code>source ~/.bash_profile</code> 然后再执行下一步操作。</p></blockquote>\n<p>以下是安装<code>acme.sh</code>时的一些高级选项及说明</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">--home是要安装的自定义目录acme.sh。默认情况下，它安装到~&#x2F;.acme.sh\n--config-home是一个可写文件夹，acme.sh 会将所有文件（包括证书&#x2F;密钥、配置）写入那里。默认情况下，它在--home\n--cert-home是一个自定义目录，用于保存您颁发的证书。默认情况下，它保存在--config-home.\n--accountemail 是用于注册 Let&#39;s Encrypt 帐户的电子邮件，您将在此处收到续订通知电子邮件。\n--accountkey是保存您的帐户私钥的文件。默认情况下，它保存在--config-home.\n--user-agent 是用于发送到 Let&#39;s Encrypt 的用户代理标头值。\n--nocron在没有 cronjob 的情况下安装 acme.sh</code></pre>\n\n<h3 id=\"三、申请证书\"><a href=\"#三、申请证书\" class=\"headerlink\" title=\"三、申请证书\"></a>三、申请证书</h3><p>通常申请证书有两种方式</p>\n<h4 id=\"1-http方式需要在你的网站根目录下放置一个文件-来验证你的域名所有权-完成验证-然后就可以生成证书了\"><a href=\"#1-http方式需要在你的网站根目录下放置一个文件-来验证你的域名所有权-完成验证-然后就可以生成证书了\" class=\"headerlink\" title=\"1.http方式需要在你的网站根目录下放置一个文件, 来验证你的域名所有权,完成验证. 然后就可以生成证书了.\"></a>1.<code>http</code>方式需要在你的网站根目录下放置一个文件, 来验证你的域名所有权,完成验证. 然后就可以生成证书了.</h4><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">acme.sh --issue -d example.com --webroot &#x2F;wwwroot&#x2F;example.com&#x2F;</code></pre>\n<p>只需要指定域名, 并指定域名所在的网站根目录. acme.sh 会全自动的生成验证文件, 并放到网站的根目录, 然后自动完成验证. 最后会聪明的删除验证文件. 整个过程没有任何副作用.</p>\n<p>如果你用的<code>apache</code>服务器, <code>acme.sh</code>还可以智能的从 apache的配置中自动完成验证, 你不需要指定网站根目录:</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">acme.sh --issue  -d mydomain.com   --apache</code></pre>\n\n<p>如果你用的<code>nginx</code>服务器, 或者反代, <code>acme.sh</code>还可以智能的从<code>nginx</code>的配置中自动完成验证, 你不需要指定网站根目录:</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">acme.sh --issue  -d mydomain.com   --nginx</code></pre>\n<p><strong>注意, 无论是 apache 还是 nginx 模式, acme.sh在完成验证之后, 会恢复到之前的状态, 都不会私自更改你本身的配置. 好处是你不用担心配置被搞坏, 也有一个缺点, 你需要自己配置 ssl 的配置, 否则只能成功生成证书, 你的网站还是无法访问https. 但是为了安全, 你还是自己手动改配置吧.</strong></p>\n<h4 id=\"2-手动dns方式-手动在域名上添加一条-txt-解析记录-验证域名所有权\"><a href=\"#2-手动dns方式-手动在域名上添加一条-txt-解析记录-验证域名所有权\" class=\"headerlink\" title=\"2. 手动dns方式, 手动在域名上添加一条 txt 解析记录, 验证域名所有权.\"></a>2. 手动<code>dns</code>方式, 手动在域名上添加一条 txt 解析记录, 验证域名所有权.</h4><p>这种方式的好处是, 你不需要任何服务器, 不需要任何公网 ip, 只需要 dns 的解析记录即可完成验证. 坏处是，如果不同时配置<code>Automatic DNS API</code>，使用这种方式<code>acme.sh</code>将无法自动更新证书，每次都需要手动再次重新解析验证域名所有权。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">acme.sh --issue -d example.com -d &quot;*.example.com&quot; --dns \\\n--yes-I-know-dns-manual-mode-enough-go-ahead-please</code></pre>\n<p>然后, <code>acme.sh</code>会生成相应的解析记录显示出来, 你只需要在你的域名管理面板中添加这条<strong>txt记录</strong>即可.</p>\n<p>等待解析完成之后, 重新生成证书:</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">acme.sh --renew -d example.com -d &quot;*.example.com&quot; \\\n--yes-I-know-dns-manual-mode-enough-go-ahead-please</code></pre>\n\n<h4 id=\"3-DNS-API方式\"><a href=\"#3-DNS-API方式\" class=\"headerlink\" title=\"3.DNS API方式\"></a>3.DNS API方式</h4><p>自动 DNS 验证方式需要使用域名解析服务商的 DNS API，像腾讯云（DNSPos）和阿里云都提供<code>DNS API</code>功能。</p>\n<p>如果你用的是腾讯云 DNSPod，在右上角头像下拉中选择<strong>API 密钥</strong>，点击“DNSPos Token”创建密钥：<br><img src=\"https://image.yunyuwu.cn/typecho/uploads/2022/09/40000700.png\" alt=\"dnspod密钥.png\"></p>\n<p>如果你用的是阿里云，在右上角头像下拉中选择<strong>AccessKey 管理</strong>，创建密钥：<br><img src=\"https://image.yunyuwu.cn/typecho/uploads/2022/09/2228017913.png\" alt=\"阿里云api.png\"></p>\n<p>创建好密钥后，使用如下命令把它们的<code>Id</code>和<code>Token</code>或<code>Secret</code>放到环境变量中</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># 腾讯云\nexport DP_Id&#x3D;&quot;Id&quot;\nexport DP_Key&#x3D;&quot;Token&quot;\n\n# 阿里云\nexport Ali_Key&#x3D;&quot;AccessKeyId&quot;\nexport Ali_Secret&#x3D;&quot;AccessKeySecret&quot;</code></pre>\n<p>然后再执行以下命令申请证书</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># 腾讯云\nacme.sh --issue --dns dns_dp -d example.com -d *.example.com\n\n# 阿里云\nacme.sh --issue --dns dns_ali -d example.com -d *.example.com</code></pre>\n\n<h3 id=\"四、安装证书\"><a href=\"#四、安装证书\" class=\"headerlink\" title=\"四、安装证书\"></a>四、安装证书</h3><p>在<code>~/.acme.sh/example.com/</code>目录生成的证书文件中，我们主要需要用到两个文件：<code>*.cer</code>和<code>*.key</code>。</p>\n<h3 id=\"注意事项：\"><a href=\"#注意事项：\" class=\"headerlink\" title=\"注意事项：\"></a><strong>注意事项：</strong></h3><ol>\n<li>证书生成成功后，默认保存在<code>~/.acme.sh/example.com/</code>目录中。请不要直接使用<code>~/.acme.sh/</code>目录下的文件，这里面的文件都是内部使用的，而且目录结构可能会变化，我们需要把证书复制到需要用的地方去。</li>\n<li>cer当作pem使用，只需要更改后缀即可。</li>\n<li>官方中文说明文档：<a href=\"https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E\">https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E</a></li>\n<li>官方项目地址：<a href=\"https://github.com/acmesh-official/acme.sh/\">https://github.com/acmesh-official/acme.sh/</a></li>\n</ol>\n","text":"SSL证书是什么？SSL证书是数字证书的一种，类似于驾驶证、护照和营业执照的电子副本。 因为配置在服务器上，也称为SSL服务器证书。 SSL 证书就是遵守 SSL协议 ，由受信任的数字证书颁发机构CA，在验证服务器身份后颁发，具有服务器身份验证和数据传输加密功能。 SSL证书通过...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"奇技淫巧","slug":"奇技淫巧","count":2,"path":"api/categories/奇技淫巧.json"}],"tags":[{"name":"奇技淫巧","slug":"奇技淫巧","count":2,"path":"api/tags/奇技淫巧.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SSL%E8%AF%81%E4%B9%A6%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F\"><span class=\"toc-text\">SSL证书是什么？</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SSL%E8%AF%81%E4%B9%A6%E5%88%86%E7%B1%BB\"><span class=\"toc-text\">SSL证书分类</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A6%82%E4%BD%95%E7%94%B3%E8%AF%B7%E9%80%9A%E9%85%8D%E7%AC%A6SSL%E8%AF%81%E4%B9%A6\"><span class=\"toc-text\">如何申请通配符SSL证书</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%EF%BC%9A\"><span class=\"toc-text\">一、环境配置：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85acme-sh\"><span class=\"toc-text\">二、安装acme.sh</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E5%AE%89%E8%A3%85socat%E6%A8%A1%E5%9D%97%E3%80%82\"><span class=\"toc-text\">1.安装socat模块。</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%AE%89%E8%A3%85amce-sh\"><span class=\"toc-text\">2.安装amce.sh</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E7%94%B3%E8%AF%B7%E8%AF%81%E4%B9%A6\"><span class=\"toc-text\">三、申请证书</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-http%E6%96%B9%E5%BC%8F%E9%9C%80%E8%A6%81%E5%9C%A8%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%94%BE%E7%BD%AE%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6-%E6%9D%A5%E9%AA%8C%E8%AF%81%E4%BD%A0%E7%9A%84%E5%9F%9F%E5%90%8D%E6%89%80%E6%9C%89%E6%9D%83-%E5%AE%8C%E6%88%90%E9%AA%8C%E8%AF%81-%E7%84%B6%E5%90%8E%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%94%9F%E6%88%90%E8%AF%81%E4%B9%A6%E4%BA%86\"><span class=\"toc-text\">1.http方式需要在你的网站根目录下放置一个文件, 来验证你的域名所有权,完成验证. 然后就可以生成证书了.</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E6%89%8B%E5%8A%A8dns%E6%96%B9%E5%BC%8F-%E6%89%8B%E5%8A%A8%E5%9C%A8%E5%9F%9F%E5%90%8D%E4%B8%8A%E6%B7%BB%E5%8A%A0%E4%B8%80%E6%9D%A1-txt-%E8%A7%A3%E6%9E%90%E8%AE%B0%E5%BD%95-%E9%AA%8C%E8%AF%81%E5%9F%9F%E5%90%8D%E6%89%80%E6%9C%89%E6%9D%83\"><span class=\"toc-text\">2. 手动dns方式, 手动在域名上添加一条 txt 解析记录, 验证域名所有权.</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-DNS-API%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">3.DNS API方式</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9B%9B%E3%80%81%E5%AE%89%E8%A3%85%E8%AF%81%E4%B9%A6\"><span class=\"toc-text\">四、安装证书</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%EF%BC%9A\"><span class=\"toc-text\">注意事项：</span></a></li></ol></li></ol>","author":{"name":"小北","slug":"blog-author","avatar":"https://q1.qlogo.cn/g?b=qq&nk=2149264593&s=640","link":"/","description":"云起云散雾不止 <br /> @ <b>公众号：云与雾科技</b>","socials":{"github":"https://github.com/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/","zhihu":"https://www.zhihu.com/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/","customs":{}}},"mapped":true,"prev_post":{"title":"运行库修复工具合集","uid":"da289fe51893eaa278636c077b89ec39","slug":"运行库修复工具合集","date":"2023-04-27T01:54:10.000Z","updated":"2023-04-27T01:58:58.082Z","comments":true,"path":"api/articles/运行库修复工具合集.json","keywords":null,"cover":"https://image.yunyuwu.cn/imgurl/lskypro/2023/04/27/6449d6bcccaea.jpg","text":"截止至发文，所有的运行库都更新到官方最新的版本，收藏起来就对了。 软件合集 下载地址：微软运行库：不含老运行库：https://gongming.lanzoui.com/iou5gr5o6cj包含老运行库：https://gongming.lanzoui.com/iFCFlr5o...","link":"","photos":[],"count_time":{"symbolsCount":287,"symbolsTime":"1 mins."},"categories":[{"name":"实用软件","slug":"实用软件","count":5,"path":"api/categories/实用软件.json"}],"tags":[{"name":"实用软件","slug":"实用软件","count":5,"path":"api/tags/实用软件.json"}],"author":{"name":"小北","slug":"blog-author","avatar":"https://q1.qlogo.cn/g?b=qq&nk=2149264593&s=640","link":"/","description":"云起云散雾不止 <br /> @ <b>公众号：云与雾科技</b>","socials":{"github":"https://github.com/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/","zhihu":"https://www.zhihu.com/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/","customs":{}}}},"next_post":{"title":"私有化部署Rocket.Chat在线聊天平台","uid":"372f0439b3c1a8d1b5aa334a3f639af0","slug":"私有化部署Rocket-Chat在线聊天平台","date":"2023-04-27T01:44:44.000Z","updated":"2023-04-27T01:46:56.492Z","comments":true,"path":"api/articles/私有化部署Rocket-Chat在线聊天平台.json","keywords":null,"cover":"https://image.yunyuwu.cn/typecho/uploads/2022/08/2277498494.webp","text":"Rocket.Chat是什么Rocket.Chat是一个开源的可高度定制的通信平台，用JavaScript开发，该项目功能齐全，并且还有各系统app。 部署环境 已经安装好Docker及Docker-compose（有宝塔 软件商店安装Docker管理器即可）必需品 Rocket...","link":"","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"实用项目","slug":"实用项目","count":5,"path":"api/categories/实用项目.json"},{"name":"实用Docker项目","slug":"实用项目/实用Docker项目","count":4,"path":"api/categories/实用项目/实用Docker项目.json"}],"tags":[{"name":"Docker","slug":"Docker","count":5,"path":"api/tags/Docker.json"},{"name":"实用项目","slug":"实用项目","count":5,"path":"api/tags/实用项目.json"},{"name":"实用Docker项目","slug":"实用Docker项目","count":4,"path":"api/tags/实用Docker项目.json"}],"author":{"name":"小北","slug":"blog-author","avatar":"https://q1.qlogo.cn/g?b=qq&nk=2149264593&s=640","link":"/","description":"云起云散雾不止 <br /> @ <b>公众号：云与雾科技</b>","socials":{"github":"https://github.com/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/","zhihu":"https://www.zhihu.com/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/","customs":{}}}}}