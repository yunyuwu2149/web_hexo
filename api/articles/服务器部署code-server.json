{"title":"服务器部署code-server","uid":"b1577de1db6345c6aa89e466932e67dd","slug":"服务器部署code-server","date":"2023-04-27T01:18:48.000Z","updated":"2023-04-27T01:23:51.690Z","comments":true,"path":"api/articles/服务器部署code-server.json","keywords":null,"cover":"https://image.yunyuwu.cn/typecho/uploads/2022/07/1512482053.png","content":"<h2 id=\"code-server是什么\"><a href=\"#code-server是什么\" class=\"headerlink\" title=\"code-server是什么\"></a>code-server是什么</h2><p><strong>Coder Technologies Inc, an Austin TX company</strong>公司开源了一个基于服务器端的<code>VScode--code-server</code>只要服务器端配置好code-server，就可以在任何浏览器上使用VScode 。<br>随时随地只要你有台设备接入了公共网络就可以写代码，只需要你有浏览器即可。这就是<a href=\"https://github.com/coder/code-server\"><code>code-server</code></a></p>\n<h2 id=\"部署步骤：\"><a href=\"#部署步骤：\" class=\"headerlink\" title=\"部署步骤：\"></a>部署步骤：</h2><h3 id=\"第一步\"><a href=\"#第一步\" class=\"headerlink\" title=\"第一步\"></a>第一步</h3><p>将源码下载到服务器并解压<br>[button color&#x3D;”success” url&#x3D;”<a href=\"https://github.com/coder/code-server/releases/\">https://github.com/coder/code-server/releases/</a>“ outline&#x3D;”” target&#x3D;”_blank”]源码下载地址[&#x2F;button]</p>\n<h3 id=\"第二步\"><a href=\"#第二步\" class=\"headerlink\" title=\"第二步\"></a>第二步</h3><p>在终端中打开解压的目录并执行下列命令，即可访问网页，访问地址为：<code>你的公网ip:端口</code></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>8080端口可以更改</p></blockquote>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">.&#x2F;bin&#x2F;code-server --host 0.0.0.0 --port 8080</code></pre>\n\n<h3 id=\"第三步\"><a href=\"#第三步\" class=\"headerlink\" title=\"第三步\"></a>第三步</h3><p>访问后发现需要密码，然后我们进入配置文件并修改</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">cd &#x2F;root&#x2F;.config&#x2F;code-server</code></pre>\n<p>将原本<code>127.0.0.1</code>修改为<code>0.0.0.0</code></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>端口也可以修改为合适的端口</p></blockquote>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">bind-addr: 0.0.0.0:8080\nauth: password\npassword: xxxxxxxxxxxxxxx\ncert: false</code></pre>\n\n<p>至此<code>code-server</code>部署完成，以下是优化步骤（不需要的可以略过）</p>\n<h3 id=\"优化问题\"><a href=\"#优化问题\" class=\"headerlink\" title=\"优化问题\"></a>优化问题</h3><ol>\n<li>解决终端断开连接后关闭服务</li>\n<li>解决ip加端口访问繁琐问题</li>\n</ol>\n<h3 id=\"问题一\"><a href=\"#问题一\" class=\"headerlink\" title=\"问题一\"></a>问题一</h3><h4 id=\"1-第一步\"><a href=\"#1-第一步\" class=\"headerlink\" title=\"1.第一步\"></a>1.第一步</h4><p>在code-server目录下新建<code>code-server-start.sh</code>文件，并写入</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">export PASSWORD&#x3D;&quot;123456&quot;\n#端口可以自己指定，其他不改，后台运行\nnohup .&#x2F;bin&#x2F;code-server --port 8080 --host 0.0.0.0 --auth password &gt; run.log 2&gt;&amp;1 &amp;  \necho $! &gt; save_pid.txt</code></pre>\n<p>不需要密码则</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">nohup .&#x2F;bin&#x2F;code-server --port 8080 --host 0.0.0.0 --auth none &gt; run.log 2&gt;&amp;1 &amp;  \necho $! &gt; save_pid.txt</code></pre>\n\n<h4 id=\"第二步-1\"><a href=\"#第二步-1\" class=\"headerlink\" title=\"第二步\"></a>第二步</h4><p>新建<code>stop.sh</code>文件并写入</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">kill -9 &#39;cat save_pid.txt&#39;  # 关闭这个进程，关闭code-server服务</code></pre>\n\n<h4 id=\"第三步-1\"><a href=\"#第三步-1\" class=\"headerlink\" title=\"第三步\"></a>第三步</h4><p>在终端执行</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">.&#x2F;code-server-start.sh</code></pre>\n<p>执行后并不会输出反馈，然后我们就可以关掉终端，访问code-server了。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>想查看日志可以在目录下的<code>run.log</code>中查看</p></blockquote>\n<h3 id=\"问题二\"><a href=\"#问题二\" class=\"headerlink\" title=\"问题二\"></a>问题二</h3><h4 id=\"第一步-1\"><a href=\"#第一步-1\" class=\"headerlink\" title=\"第一步\"></a>第一步</h4><p>新建一个纯静态站点，然后点击反向代理依照自己的端口号进行设置<br><img src=\"https://image.yunyuwu.cn/typecho/uploads/2022/07/2820433000.png\" alt=\"设置反代.png\"></p>\n<h4 id=\"第二步-2\"><a href=\"#第二步-2\" class=\"headerlink\" title=\"第二步\"></a>第二步</h4><p>修改反向代理配置文件</p>\n<pre class=\"line-numbers language-txt\" data-language=\"txt\"><code class=\"language-txt\">proxy_set_header REMOTE-HOST $remote_addr;</code></pre>\n<p>在这段下边加入下方三行代码</p>\n<pre class=\"line-numbers language-txt\" data-language=\"txt\"><code class=\"language-txt\">proxy_set_header Upgrade $http_upgrade;\nproxy_set_header Connection upgrade;\nproxy_set_header Accept-Encoding gzip;</code></pre>\n<p>这时候即可使用我们的域名访问code-server<br><img src=\"https://image.yunyuwu.cn/typecho/uploads/2022/07/1512482053.png\" alt=\"成品.png\"></p>\n<p>最后、本文借鉴了大佬<a href=\"https://www.fuuuy.cn/\">@Brains - 灵感乌托邦</a>的配置，感谢大佬慷慨分享！</p>\n","text":"code-server是什么Coder Technologies Inc, an Austin TX company公司开源了一个基于服务器端的VScode--code-server只要服务器端配置好code-server，就可以在任何浏览器上使用VScode 。随时随地只要你有...","link":"","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"实用项目","slug":"实用项目","count":5,"path":"api/categories/实用项目.json"},{"name":"实用Web项目","slug":"实用项目/实用Web项目","count":1,"path":"api/categories/实用项目/实用Web项目.json"}],"tags":[{"name":"实用项目","slug":"实用项目","count":5,"path":"api/tags/实用项目.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#code-server%E6%98%AF%E4%BB%80%E4%B9%88\"><span class=\"toc-text\">code-server是什么</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4%EF%BC%9A\"><span class=\"toc-text\">部署步骤：</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E6%AD%A5\"><span class=\"toc-text\">第一步</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%BA%8C%E6%AD%A5\"><span class=\"toc-text\">第二步</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%89%E6%AD%A5\"><span class=\"toc-text\">第三步</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BC%98%E5%8C%96%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">优化问题</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%E4%B8%80\"><span class=\"toc-text\">问题一</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E7%AC%AC%E4%B8%80%E6%AD%A5\"><span class=\"toc-text\">1.第一步</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%BA%8C%E6%AD%A5-1\"><span class=\"toc-text\">第二步</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%89%E6%AD%A5-1\"><span class=\"toc-text\">第三步</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%97%AE%E9%A2%98%E4%BA%8C\"><span class=\"toc-text\">问题二</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E6%AD%A5-1\"><span class=\"toc-text\">第一步</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%BA%8C%E6%AD%A5-2\"><span class=\"toc-text\">第二步</span></a></li></ol></li></ol></li></ol>","author":{"name":"小北","slug":"blog-author","avatar":"https://q1.qlogo.cn/g?b=qq&nk=2149264593&s=640","link":"/","description":"云起云散雾不止 <br /> @ <b>公众号：云与雾科技</b>","socials":{"github":"https://github.com/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/","zhihu":"https://www.zhihu.com/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/","customs":{}}},"mapped":true,"prev_post":{"title":"foobar2000汉化版","uid":"3216f7504e047cfab1876d9e692d5c53","slug":"foobar2000汉化版","date":"2023-04-27T01:25:27.000Z","updated":"2023-04-27T01:27:40.515Z","comments":true,"path":"api/articles/foobar2000汉化版.json","keywords":null,"cover":"https://image.yunyuwu.cn/typecho/uploads/2022/07/2601892628.png","text":"———————–【软件介绍】———————-foobar2000 是一个 Windows 平台下的高级音频播放器.包含完全支持 unicode 及支持播放增益的高级标签功能. 特色： 支持的音频格式: MP3, MP4, AAC, CD Audio, WMA, Vorbis,FL...","link":"","photos":[],"count_time":{"symbolsCount":559,"symbolsTime":"1 mins."},"categories":[{"name":"实用软件","slug":"实用软件","count":5,"path":"api/categories/实用软件.json"}],"tags":[{"name":"实用软件","slug":"实用软件","count":5,"path":"api/tags/实用软件.json"}],"author":{"name":"小北","slug":"blog-author","avatar":"https://q1.qlogo.cn/g?b=qq&nk=2149264593&s=640","link":"/","description":"云起云散雾不止 <br /> @ <b>公众号：云与雾科技</b>","socials":{"github":"https://github.com/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/","zhihu":"https://www.zhihu.com/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/","customs":{}}}},"next_post":{"title":"使用Docker部署YesPlayMusic","uid":"6981ae221d18f14e9e729a140245378f","slug":"使用Docker部署YesPlayMusic","date":"2023-04-27T01:11:10.000Z","updated":"2023-04-27T01:22:35.499Z","comments":true,"path":"api/articles/使用Docker部署YesPlayMusic.json","keywords":null,"cover":"https://image.yunyuwu.cn/typecho/uploads/2022/07/1829290898.png","text":"YesPlayMusic是什么YesPlayMusic是一个颜值很高的第三方音乐播放器，他没有复杂的界面，支持网易云账号登录、MV播放、没有任何的社交功能、显示歌词、暗色模式等功能，比网易云音乐本身要好看很多。 如何在没有安装客户端的情况下使用他来听歌，那我们可以使用Docker...","link":"","photos":[],"count_time":{"symbolsCount":626,"symbolsTime":"1 mins."},"categories":[{"name":"实用项目","slug":"实用项目","count":5,"path":"api/categories/实用项目.json"},{"name":"实用Docker项目","slug":"实用项目/实用Docker项目","count":4,"path":"api/categories/实用项目/实用Docker项目.json"}],"tags":[{"name":"Docker","slug":"Docker","count":5,"path":"api/tags/Docker.json"},{"name":"实用项目","slug":"实用项目","count":5,"path":"api/tags/实用项目.json"},{"name":"实用Docker项目","slug":"实用Docker项目","count":4,"path":"api/tags/实用Docker项目.json"}],"author":{"name":"小北","slug":"blog-author","avatar":"https://q1.qlogo.cn/g?b=qq&nk=2149264593&s=640","link":"/","description":"云起云散雾不止 <br /> @ <b>公众号：云与雾科技</b>","socials":{"github":"https://github.com/","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"https://weibo.com/","zhihu":"https://www.zhihu.com/","csdn":"https://blog.csdn.net/","juejin":"https://juejin.cn/","customs":{}}}}}